(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84632,e=>{"use strict";var s=e.i(43476),a=e.i(92721),r=e.i(52092),t=e.i(25822),l=e.i(83792);let i=(0,e.i(75254).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function d({email:e,onClose:a}){let r=e.htmlBody||"",d=e.body||"",n=(0,t.stripHTMLTags)(r).trim(),o=(0,t.stripHTMLTags)(d).trim().length>n.length+20,c=(0,t.decodeQuotedPrintableIfNeeded)(o?d:r||d),m=(0,t.sanitizeEmailHTML)(c),x=(0,t.stripHTMLTags)(c).trim(),h=/<\s*[a-z][^>]*>/i.test(m),g=(0,t.stripHTMLTags)(c).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\r?\n/g,"<br />"),p=h?m:g,b=(0,t.stripHTMLTags)(m).trim().length>0,f=(0,l.formatSenderName)(e.from),u=e.from,y=(0,l.formatEmailDateTime)(e.timestamp);return(0,s.jsxs)("div",{className:"flex flex-col h-full min-h-0 bg-white rounded-2xl shadow-lg animate-slideUp overflow-hidden border border-gray-200",children:[(0,s.jsxs)("div",{className:"border-b border-gray-200 px-6 py-5 flex items-center justify-between bg-white",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 break-words",children:e.subject||(0,s.jsx)("span",{className:"text-gray-400 text-base",children:"(No subject)"})})}),a&&(0,s.jsxs)("button",{onClick:a,className:"group ml-4 inline-flex items-center justify-center gap-2 rounded-full bg-white px-4 py-2 text-gray-900 font-black shadow-sm border border-gray-200 hover:shadow-md transition transform hover:scale-105 hover:text-red-600 hover:border-red-600","aria-label":"Close",children:[(0,s.jsx)(i,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-xs font-black hidden sm:inline",children:"Close"})]})]}),(0,s.jsxs)("div",{className:"border-b border-gray-200 px-6 py-5 bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"h-14 w-14 rounded-lg bg-gray-900 flex items-center justify-center shadow-md flex-shrink-0",children:(0,s.jsx)("span",{className:"text-lg font-bold text-white",children:f.charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-bold text-gray-900 truncate text-lg",children:f}),(0,s.jsx)("p",{className:"text-sm text-gray-600 truncate font-mono",children:u})]})]}),(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["Sent: ",y]}),(0,s.jsxs)("span",{className:"inline-flex items-center rounded-full bg-gray-200 px-3 py-1 text-xs font-semibold text-gray-800 border border-gray-300",children:[(0,s.jsxs)("span",{className:"relative flex h-2 w-2 mr-2",children:[(0,s.jsx)("span",{className:"absolute inline-flex h-full w-full rounded-full bg-gray-400 opacity-75 animate-ping"}),(0,s.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-gray-600"})]}),"Received"]})]})]}),(0,s.jsx)("div",{className:"flex-1 min-h-0 overflow-auto px-6 py-8",children:b?(0,s.jsx)("iframe",{title:"Email content",className:"h-full w-full rounded-xl border border-gray-200 bg-white",sandbox:"allow-popups allow-popups-to-escape-sandbox",referrerPolicy:"no-referrer",srcDoc:`<!doctype html><html><head><meta charset="utf-8" /><style>
              body { font-family: Arial, sans-serif; margin: 0; padding: 0; color: #111827; line-height: 1.6; }
              img { max-width: 100%; height: auto; }
              a { color: #111827; text-decoration: underline; }
              table { max-width: 100%; }
              pre { white-space: pre-wrap; word-break: break-word; }
            </style></head><body>${p}</body></html>`}):(0,s.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-700",children:x||"No readable content."})}),(0,s.jsx)("div",{className:"border-t border-gray-200 px-6 py-4 bg-gray-50",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("div",{className:"w-1 h-1 rounded-full bg-gray-400"}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"This email will be deleted in 30 days"}),(0,s.jsx)("div",{className:"w-1 h-1 rounded-full bg-gray-400"})]})})]})}function n(){let{isEmailViewerOpen:e,closeEmailViewer:t}=(0,a.useUiStore)(),{getSelectedEmail:l}=(0,r.useInboxStore)(),i=l();return e&&i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 transition-opacity",onClick:t}),(0,s.jsx)("div",{className:"fixed inset-4 sm:inset-auto sm:left-1/2 sm:top-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 sm:w-full sm:max-w-2xl z-50",children:(0,s.jsx)("div",{className:"h-full sm:h-[90vh] sm:max-h-[90vh] overflow-hidden",children:(0,s.jsx)(d,{email:i,onClose:t})})})]}):null}e.s(["EmailViewerModal",()=>n],84632)},51346,e=>{e.n(e.i(84632))}]);